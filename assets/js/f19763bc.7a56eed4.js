(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[857],{4093:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return d},toc:function(){return u},default:function(){return m}});var a=n(2122),o=n(9756),r=(n(7294),n(3905)),i=["components"],l={sidebar_position:2},s="Validator Node Setup (on Testnet)",d={unversionedId:"general/run-a-testnet-validator-node",id:"general/run-a-testnet-validator-node",isDocsHomePage:!1,title:"Validator Node Setup (on Testnet)",description:"Hardware Requirements",source:"@site/docs/general/run-a-testnet-validator-node.md",sourceDirName:"general",slug:"/general/run-a-testnet-validator-node",permalink:"/findora-wiki/docs/general/run-a-testnet-validator-node",editUrl:"https://github.com/FindoraNetwork/findora-wiki/edit/main/docs/general/run-a-testnet-validator-node.md",version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Getting Started",permalink:"/findora-wiki/docs/general/intro"},next:{title:"Contributing",permalink:"/findora-wiki/docs/general/contributing"}},u=[{value:"Hardware Requirements",id:"hardware-requirements",children:[]},{value:"Automated Setup (via Script)",id:"automated-setup-via-script",children:[]},{value:"Manual Setup",id:"manual-setup",children:[{value:"Download Validator Binaries",id:"download-validator-binaries",children:[]},{value:"Configure Local Node (for Testnet)",id:"configure-local-node-for-testnet",children:[]}]},{value:"Request Testnet FRA Tokens",id:"request-testnet-fra-tokens",children:[]},{value:"Stake/Unstake FRA and Claim Rewards (as a Validator)",id:"stakeunstake-fra-and-claim-rewards-as-a-validator",children:[{value:"Stake into findora network",id:"stake-into-findora-network",children:[]},{value:"Append more power to your node",id:"append-more-power-to-your-node",children:[]},{value:"Query infomations",id:"query-infomations",children:[]},{value:"Claim rewards",id:"claim-rewards",children:[]},{value:"Unstake principals",id:"unstake-principals",children:[]}]}],p={toc:u};function m(e){var t=e.components,l=(0,o.Z)(e,i);return(0,r.kt)("wrapper",(0,a.Z)({},p,l,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"validator-node-setup-on-testnet"},"Validator Node Setup (on Testnet)"),(0,r.kt)("h2",{id:"hardware-requirements"},"Hardware Requirements"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Requirements",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Minimum: 8GB RAM, 2 Core CPU, 100GB Hard Disk"),(0,r.kt)("li",{parentName:"ul"},"Recommended: 16GB RAM, 4 Core CPU, 300GB Hard Disk")))),(0,r.kt)("h2",{id:"automated-setup-via-script"},"Automated Setup (via Script)"),(0,r.kt)("p",null,"Download and run the script below which automatically downloads the binaries and configures your Testnet validator node: "),(0,r.kt)("p",null,(0,r.kt)("a",{target:"_blank",href:n(1804).Z},(0,r.kt)("strong",null,"node_init.sh"))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Tips"),":"),(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},"example: ",(0,r.kt)("inlineCode",{parentName:"li"},"bash -x node_init.sh")))),(0,r.kt)("h2",{id:"manual-setup"},"Manual Setup"),(0,r.kt)("p",null,"If you don't wish to run the automated setup script above, you can manually download binary files and configure your Testnet validator following the instructions below:"),(0,r.kt)("h3",{id:"download-validator-binaries"},"Download Validator Binaries"),(0,r.kt)("p",null,"Download the following files:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"tendermint"),": a Findora version of tendermint-core node",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/FindoraNetwork/testnet-downloads/releases/download/linux/tendermint"},"Linux version")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/FindoraNetwork/testnet-downloads/releases/download/macos/tendermint"},"MacOS version")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"abci_validator_node"),": the ABCI node of findora network",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/FindoraNetwork/testnet-downloads/releases/download/linux/abci_validator_node"},"Linux version")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/FindoraNetwork/testnet-downloads/releases/download/macos/abci_validator_node"},"MacOS version")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"fns"),": Findora Node Setup (fns) is CLI tool with sub-commands necessary to setup a validator node and stake/unstake FRA",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/FindoraNetwork/testnet-downloads/releases/download/linux/fns"},"Linux version")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/FindoraNetwork/testnet-downloads/releases/download/macos/fns"},"MacOS version"))))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Tips"),":"),(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},"You can (optionally) run a Linux node via ",(0,r.kt)("inlineCode",{parentName:"li"},"Windows Subsystem for Linux")),(0,r.kt)("li",{parentName:"ul"},"Check that binaries have executable permissions set correctly",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"ex) ",(0,r.kt)("inlineCode",{parentName:"li"},"chmod +x tendermint abci_validator_node fns")))),(0,r.kt)("li",{parentName:"ul"},"Check that binary files are placed into one of your ",(0,r.kt)("inlineCode",{parentName:"li"},"PATH")," directories",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"ex) ",(0,r.kt)("inlineCode",{parentName:"li"},"mv tendermint abci_validator_node fns /usr/local/bin/")))))),(0,r.kt)("h3",{id:"configure-local-node-for-testnet"},"Configure Local Node (for Testnet)"),(0,r.kt)("h4",{id:"run-tendermint-executable-to-initialize-tendermint-and-to-create-a-node-key"},"Run ",(0,r.kt)("inlineCode",{parentName:"h4"},"tendermint")," Executable to initialize Tendermint and to Create a Node Key"),(0,r.kt)("p",null,"Initializing Tendermint will create a node key (stored in a newly created ",(0,r.kt)("inlineCode",{parentName:"p"},"./tendermint/config/priv_validator_key.json")," file). The node key will be used to identity your node, sign blocks and perform other tendermint consensus-related tasks."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# Clean up old data that may exist\nrm -rf ~/.tendermint\n\n# Initialize the configuration of your Tendermint node\n# This command will create a .tendermint directory and priv_validator_key.json file needed later\ntendermint init\n\n# Create ledger data directory, for example\nrm -rf ${LEDGER_DIR}\nmkdir -p ${LEDGER_DIR}/abci ${LEDGER_DIR}/tendermint\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Tips"),":"),(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},"If you encounter a security issue error when trying to run ",(0,r.kt)("inlineCode",{parentName:"li"},"tendermint init"),", you may need to manually approve its security priveliges in you OS first. Then re-run the ",(0,r.kt)("inlineCode",{parentName:"li"},"tendermint init")," command again."))),(0,r.kt)("h4",{id:"set-environment-variables"},"Set Environment Variables"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# ex)\n#     export LEDGER_DIR=${HOME}/findora_testnet\n#     We recommend storing ledger data in ${HOME}/findora_testnet\nexport LEDGER_DIR=<Path to store ledger data>\n\n# ex)\n#     export TENDERMINT_NODE_KEY_CONFIG_PATH=${HOME}/.tendermint/config/priv_validator_key.json\nexport TENDERMINT_NODE_KEY_CONFIG_PATH=<The path where the 'priv_validator_key.json' are stored>\n\n# Optional, only if you want to query from your local node\nexport ENABLE_LEDGER_SERVICE=true\n\n# Optional, only if you want to query from your local node\nexport ENABLE_QUERY_SERVICE=true\n")),(0,r.kt)("h4",{id:"create-staking-key-via-fns-cli-tool"},"Create Staking Key via ",(0,r.kt)("inlineCode",{parentName:"h4"},"fns")," CLI Tool"),(0,r.kt)("p",null,"Generate a new, random pair of public and private keys for your node which will be used for FRA staking:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"fns genkey > ~/findora_testnet/tmp.gen.keypair\n")),(0,r.kt)("p",null,"View the contents of your ",(0,r.kt)("inlineCode",{parentName:"p"},"tmp.gen.keypair")," file via the command below:"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"cat ~/findora_testnet/tmp.gen.keypair")),(0,r.kt)("p",null,"An example of the file's content is below (Note: the ",(0,r.kt)("inlineCode",{parentName:"p"},"pub_key")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"sec_key")," below are examples. Do not use them in your own node):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'Mnemonic: repair drink action brass term blur fat doll spoon thumb raise squirrel tornado engine tumble picnic approve elegant tube urge ghost secret seminar blame\nKey: {\n  "pub_key": "LSlwyUYVg1zBtCqOS6wv_49uHTYS2OwQLBn3bRjrtPU=",\n  "sec_key": "b0MGhK7xaRQHuhzFkaBhQ1o4GwTumJEWt1NQ7FChNwA="\n}\n')),(0,r.kt)("p",null,"And then, you can import the ",(0,r.kt)("inlineCode",{parentName:"p"},"sec_key")," to your wallet, and query the balances or other informations from your wallet."),(0,r.kt)("p",null,"Configure your validator node to use your newly generated public and private keys:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'# Link the fns client to the Findora Testnet address\nfns setup -S https://prod-testnet.prod.findora.org\n\n# Connect your staking key (which is related to the mnemonic you will store in tmp.gen.keypair) to your fns\n# Afterwards, fns can use your staking key to sign transactions on your behalf\n# ex)\n#     echo "repair drink action brass term blur fat doll spoon thumb raise squirrel tornado engine tumble picnic approve elegant tube urge ghost secret seminar blame" > ${LEDGER_DIR}/node.mnemonic\n#     fns setup -O ${LEDGER_DIR}/node.mnemonic\nfns setup -O <Path to the mnemonic of your node> || exit 1\n\n# Connect your Node Key to fns\n# ex)\n#     fns setup -K ${HOME}/.tendermint/config/priv_validator_key.json\nfns setup -K <path to validator key> || exit 1\n')),(0,r.kt)("h4",{id:"configure-tendermint-core-node"},"Configure Tendermint-Core Node"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Tips"),":"),(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},"For production environments, setup a cluster (instead of a raw node)"),(0,r.kt)("li",{parentName:"ul"},"Install the following command line tools before continuing:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"'wget', 'curl', 'jq' and 'perl'"))))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# Get the genesis config from an existing node of the testnet\ncurl https://prod-testnet.prod.findora.org:26657/genesis \\\n    | jq -c '.result.genesis' \\\n    | jq > ~/.tendermint/config/genesis.json\n\n# Adjust the block interval\nperl -pi -e 's#(create_empty_blocks_interval = ).*#$1\"15s\"#' ~/.tendermint/config/config.toml\n\n# Config some existing nodes to your local node, so it can connect to the testnet\nperl -pi -e \\\n    's#(persistent_peers = )\".*\"#$1\"b87304454c0a0a0c5ed6c483ac5adc487f3b21f6\\@prod-testnet-us-west-2-sentry-000-public.prod.findora.org:26656\"#' \\\n    ~/.tendermint/config/config.toml\n")),(0,r.kt)("h4",{id:"start-local-node"},"Start Local Node"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# Start your validator process\nnohup abci_validator_node 2>&1 > ${LEDGER_DIR}/abci/validator.log &\n\n# Start your tendermint process\n# Notes:\n#   If you want to access the tendermint node on another host,\n#   use option --rpc.laddr=tcp://0.0.0.0:26657 when starting the process\nnohup tendermint node 2>&1 > ${LEDGER_DIR}/tendermint/consensus.log &\n")),(0,r.kt)("h4",{id:"check-local-node-status"},"Check Local Node Status"),(0,r.kt)("p",null,"If the following commands return status messages without any errors, then your node has been successfully configured and started:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"curl 'http://localhost:26657/status'\ncurl 'http://localhost:8669/version'\ncurl 'http://localhost:8668/version' # Only if you set the 'ENABLE_LEDGER_SERVICE'\ncurl 'http://localhost:8667/version' # Only if you set the 'ENABLE_QUERY_SERVICE'\n")),(0,r.kt)("h2",{id:"request-testnet-fra-tokens"},"Request Testnet FRA Tokens"),(0,r.kt)("p",null,"Before you can request Testnet FRA tokens you must locate the wallet address associated with your validator node. To do this, run ",(0,r.kt)("inlineCode",{parentName:"p"},"fns show")," and locate the address under ",(0,r.kt)("inlineCode",{parentName:"p"},"Findora Address")),(0,r.kt)("p",null,"An example of the result of ",(0,r.kt)("inlineCode",{parentName:"p"},"fns show")," is below. Do not use the example address below. This is the address you will give out when requesting FRA testnet tokens."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"Findora Address:\nfra17f8h2r690eh6s5aph5fwwygqfek8ehcatq2hzreaa6mlnuyrr86q708p76\n")),(0,r.kt)("p",null,"You can request Testnet FRA tokens in two ways:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"1) Fill out this form: ",(0,r.kt)("a",{parentName:"li",href:"https://docs.google.com/forms/d/e/1FAIpQLScyRjf47U2azpUs2rX9_vvMrSiDNulYBPSAPtLUioHE-ZEwJg/viewform"},"FRA Request Form")," OR"),(0,r.kt)("li",{parentName:"ul"},"2) Make a request on the Findora Discord channel: ",(0,r.kt)("a",{parentName:"li",href:"https://discord.gg/nMH9nuPT"},"Findora Discord"))),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Tips"),":"),(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},"All FRA token requests will be approved"),(0,r.kt)("li",{parentName:"ul"},"Testnet FRA form requests are processed every 12 hours"))),(0,r.kt)("h2",{id:"stakeunstake-fra-and-claim-rewards-as-a-validator"},"Stake/Unstake FRA and Claim Rewards (as a Validator)"),(0,r.kt)("p",null,"Staking operations also rely on the use of the ",(0,r.kt)("inlineCode",{parentName:"p"},"fns"),"."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Usage example:"),(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("inlineCode",{parentName:"p"},"fns stake --help")),(0,r.kt)("pre",{parentName:"blockquote"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"USAGE:\n    fns stake [FLAGS] [OPTIONS] --amount <Amount>\n\nFLAGS:\n    -a, --append     stake more FRAs to your node\n\nOPTIONS:\n    -n, --amount <Amount>           how much `FRA unit`s you want to stake\n    -R, --commission-rate <Rate>    the commission rate for delegators, a float number from 0.0 to 1.0\n    -M, --validator-memo <Memo>     the description of your validator node, optional\n")),(0,r.kt)("p",{parentName:"blockquote"},"Similar help information can be obtained through the ",(0,r.kt)("inlineCode",{parentName:"p"},"fns")," tool itself:"),(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"fns --help")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"fns stake --help")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"fns unstake --help")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"fns claim --help")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"fns transfer --help")),(0,r.kt)("li",{parentName:"ul"},"..."))),(0,r.kt)("h3",{id:"stake-into-findora-network"},"Stake into findora network"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"Tips"),":"),(0,r.kt)("ul",{parentName:"blockquote"},(0,r.kt)("li",{parentName:"ul"},"Before staking, wait for 100% data synchronization of your validator node",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Else, you may be charged a 'validator node offline' penatly fee."))))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# The minimum amount of FRA you must stake to run a validator is 888,888 FRA\n# ex)\n# - To stake 999999 FRAs with a commision rate of 2% (and validator name of Validator Pool A)\n# - Note: that is 999999 * 1000000 FRA units\nfns stake -n $((999999 * 1000000)) -R 0.2 -M 'Validator Pool A'\n")),(0,r.kt)("h3",{id:"append-more-power-to-your-node"},"Append more power to your node"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# append 2 FRA units to your node,\n# the power of your node will be increased by 2 if all is well\nfns stake -a -n 2\n")),(0,r.kt)("h3",{id:"query-infomations"},"Query infomations"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"fns show\n")),(0,r.kt)("h3",{id:"claim-rewards"},"Claim rewards"),(0,r.kt)("p",null,"Claim all your rewards:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"fns claim\n")),(0,r.kt)("p",null,"Claim part of your rewards:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# fns claim -n <the amount of FRA units you want>\n# example:\n# - your want to claim 10 FRAs\n# - that is 10 * 1000000 FRA units\nfns claim -n $((10 * 1000000))\n")),(0,r.kt)("h3",{id:"unstake-principals"},"Unstake principals"),(0,r.kt)("p",null,"Unstake all your principals:"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("strong",{parentName:"p"},"NOTE"),": this operation will make your node out of findora network (testnet).")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"fns unstake\n")),(0,r.kt)("p",null,"Unstake part of your principals:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"# fns unstake -n <the amount of FRA units you want>\n# example:\n# - your want to unstake 900 FRAs\n# - that is 900 * 1000000 FRA units\nfns unstake -n $((900 * 1000000))\n")))}m.isMDXComponent=!0},1804:function(e,t,n){"use strict";t.Z=n.p+"assets/files/node_init-31d9c5d40d415aabd11a2d74a873d569.sh"}}]);